<main>
	<div class="row">
		<div class="col-md-6">
			<div class="panel panel-default">
				<div class="panel-heading">Solicitudes de estudiantes</div>
				<div class="panel-body">
					<div class="card">
					  <ul class="list-group list-group-flush" id="myScrollspy">
					  <!-- Trigger the modal with a button -->
					    <li class="list-group-item" ng-repeat="request in vm.requestsList | filter:{state_key:'1'}">
					    	{{request.name}}
					    	<button ng-click="vm.viewRequest(request)" class="btn btn-sm btn-embossed btn-warning pull-right" data-toggle="modal" data-target="#myModal">Ver solicitud</button>
					    </li>
					    <li class="list-group-item">Estudiante a<button class="btn btn-sm btn-embossed btn-warning pull-right">Ver solicitud</button></li>
					    <li class="list-group-item">Estudiante b<button class="btn btn-sm btn-embossed btn-warning pull-right">Ver solicitud</button></li>
					  </ul>
					</div>
				</div>
				<div class="panel-footer"></div>
			</div>
		</div>
	</div><!--Primer row-->
	<!--Fuera del row coloco el modal-->
	<!-- Modal -->
	<div id="myModal" class="modal fade" role="dialog">
	  <div class="modal-dialog">

	    <!-- Modal content-->
	    <div class="modal-content">
	      <div class="modal-header">
	        <button type="button" class="close" data-dismiss="modal">&times;</button>
	        <h4>Nueva solicitud</h4>
	      </div>
	      <div class="modal-body">
	        <a href="javascript:;" ng-click="vm.closeModal()">Cerrar</a>
    		
			<form>
				<!--despliega todo el contenido de la solicitud-->
				<div class="unModal-body">
					<p>
						<img ng-src="{{vm.req.avatarUrl}}" style="width: 50px; height: 50px">
						Estudiante: {{vm.req.name}} {{vm.req.surname}} {{vm.req.secondSurname}}
					</p>
					<p>Fecha de nacimiento: {{vm.req.birthdate | date :  "dd/MM/y"}}</p>
					<p>Correo: {{vm.req.mail}}</p>
					<p>Cédula: {{vm.req.id}}</p>
					<div class="col-md-11">
					</div>
					<ul>Carreras:
						<li ng-repeat="carrer in vm.req.carrers">
							<!--muestra solamente el nombre del solicitante-->
							<p>{{ carrer }}</p>
						</li>
					</ul>
					<!-- Currículo:
					<button>Ver currículo</button> -->

					<!--sección oculta (contiene la justificacion del rechazo)-->
					<div class="extra" ng-Show="vm.rejection">
						<form novalidate>
							<div class="form-group">
								<label>Justificación</label>
								<input class="form-control" type="text" placeholder="agregue una justificación" ng-model="vm.req.justification">
								<div ng-show="vm.validate">La justificación es requerida</div>
							</div>
						</form>
					</div>
				</div>
				
			</form>
	      </div>
	      <div class="modal-footer">
	      <!--procesamiento de la solicitud (aprueba o rechaza)-->
			<div class="unModal-footer">
				<button ng-show="vm.confirm" class="btn btn-sm btn-embossed btn-danger" ng-click="vm.rejectRequest(vm.req)">Confirmar rechazo</button>
				<button ng-show="vm.btnYes" class="btn btn-sm btn-embossed btn-warning" ng-click="vm.approveRequest(vm.req)">Aprobar</button>
				<button ng-show="vm.btnNo" class="btn btn-sm btn-embossed btn-warning" ng-click="vm.rejection=true;vm.confirm=true;vm.btnYes=false;vm.btnNo=false">Rechazar</button><!--muestra la seccion oculta-->
	        <button ng-click="vm.hideConfirm()" type="button" class="btn btn-sm btn-embossed btn-danger pull-left" data-dismiss="modal">Cancelar</button>
			</div>
	      </div>
	    </div>

	  </div>
	</div><!--FinModal-->
</main>

<!--ITERACION 2-->
<!--Mostrar solicitudes de estudiantes-->
<!-- <div>
	Lista de solicitudes
	<ul ng-repeat="request in vm.requestsList | filter:{state_key:'1'}">
		<li>
			{{request.name}}
			<button ng-click="vm.viewRequest(request)">Ver solicitud</button>
		</li>
	</ul>
</div> -->

<!--Muestra el detalle de la solicitud seleccionada-->
<!--la idea es que sea un modal-->
<!-- <div class="modalElement" id="requestModal" ng-Show="vm.modal">
	<div class="modalElement_container">
		<a href="javascript:;" ng-click="vm.closeModal()">Cerrar</a>
		<h2>Solicitud de {{request.name}}</h2>
		<form>
			<div class="unModal-body">
				<p>Estado: {{vm.req.state_key}}</p>
				<p>Estudiante: {{vm.req.name}}</p>
				<p>Apellido: {{vm.req.surname}}</p>
				<p>Apellido 2: {{vm.req.secondSurname}}</p>
				<p>Fecha de nacimiento: {{vm.req.birthdate}}</p>
				<p>Correo: {{vm.req.mail}}</p>
				<p>Cédula: {{vm.req.id}}</p>
				<ul>Carreras:
					<li ng-repeat="carrer in vm.req.carrers">
						<p>{{ carrer }}</p>
					</li>
				</ul>
				Foto:
				<img ng-src="{{vm.req.avatarUrl}}" style="width: 50px; height: 50px">
				<div class="extra" ng-Show="vm.rejection">
					<label>Justificación</label>
					<input type="text" name="Justification" ng-model="vm.req.justification">
					<div ng-show="vm.validate">La justificación es requerida</div>
					<button ng-click="vm.rejectRequest(vm.req)">Confirmar rechazo</button>
				</div>
			</div>
			<div class="unModal-footer">
				<button ng-click="vm.approveRequest(vm.req)">Aprobar solicitud</button>
				<button ng-click="vm.rejection=true">Rechazar solicitud</button>
	</div>
</div> -->